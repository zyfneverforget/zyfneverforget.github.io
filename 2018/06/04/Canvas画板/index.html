<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Canvas画板 | 一个简单的小博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="使用canvas实现一个画板canvas的基本用法首先在HTML1&amp;lt;canvas id=&amp;quot;canvas&amp;quot; width=&amp;quot;150&amp;quot; height=&amp;quot;150&amp;quot;&amp;gt;&amp;lt;/canvas&amp;gt; 不要使用CSS来试图控制canvas的宽高。基本用法123456789101112var canvas = document.getElem">
<meta property="og:type" content="article">
<meta property="og:title" content="Canvas画板">
<meta property="og:url" content="http://yoursite.com/2018/06/04/Canvas画板/index.html">
<meta property="og:site_name" content="一个简单的小博客">
<meta property="og:description" content="使用canvas实现一个画板canvas的基本用法首先在HTML1&amp;lt;canvas id=&amp;quot;canvas&amp;quot; width=&amp;quot;150&amp;quot; height=&amp;quot;150&amp;quot;&amp;gt;&amp;lt;/canvas&amp;gt; 不要使用CSS来试图控制canvas的宽高。基本用法123456789101112var canvas = document.getElem">
<meta property="og:updated_time" content="2018-10-31T03:43:27.919Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Canvas画板">
<meta name="twitter:description" content="使用canvas实现一个画板canvas的基本用法首先在HTML1&amp;lt;canvas id=&amp;quot;canvas&amp;quot; width=&amp;quot;150&amp;quot; height=&amp;quot;150&amp;quot;&amp;gt;&amp;lt;/canvas&amp;gt; 不要使用CSS来试图控制canvas的宽高。基本用法123456789101112var canvas = document.getElem">
  
    <link rel="alternate" href="/atom.xml" title="一个简单的小博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">一个简单的小博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Canvas画板" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/04/Canvas画板/" class="article-date">
  <time datetime="2018-06-04T02:42:58.000Z" itemprop="datePublished">2018-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Canvas画板
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="使用canvas实现一个画板"><a href="#使用canvas实现一个画板" class="headerlink" title="使用canvas实现一个画板"></a>使用canvas实现一个画板</h2><p>canvas的基本用法<br>首先在HTML<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id=&quot;canvas&quot; width=&quot;150&quot; height=&quot;150&quot;&gt;&lt;/canvas&gt;</span><br></pre></td></tr></table></figure></p>
<p>不要使用CSS来试图控制canvas的宽高。<br>基本用法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var canvas = document.getElementById(&apos;canvas&apos;);</span><br><span class="line">var ctx = canvas.getContext(&apos;2d&apos;);</span><br><span class="line">//接下来画个矩形</span><br><span class="line"></span><br><span class="line">ctx.fillStyle = &quot;rgb(200,0,0)&quot;;  //填充的颜色</span><br><span class="line">ctx.fillRect (10, 10, 55, 50);  //准确来说是填充一个矩形</span><br><span class="line">``</span><br><span class="line">fillRect(x，y，width,height)接受四个参数：x与y指定了在canvas画布上所绘制的矩形的左上角（相对于原点）的坐标。width和height设置矩形的尺寸。</span><br><span class="line">strokeRect(x, y, width, height) 绘制一个矩形的边框</span><br><span class="line">clearRect(x, y, width, height) 清除一个矩形</span><br><span class="line"></span><br><span class="line">绘制一个填充三角形</span><br></pre></td></tr></table></figure></p>
<p>ctx.beginPath(); //必须<br>ctx.moveTo(75, 50);   //起点<br>ctx.lineTo(100, 75);  //第二个点<br>ctx.lineTo(100, 25);    //终点<br>ctx.fill();     //闭合<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">绘制一个描边三角形</span><br></pre></td></tr></table></figure></p>
<p> ctx.beginPath();<br> ctx.moveTo(125,125);<br> ctx.lineTo(125,45);<br> ctx.lineTo(45,125);<br> ctx.closePath();  //闭合<br> ctx.stroke();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">moveTo(x, y)将笔触移动到指定的坐标x以及y上。</span><br><span class="line">lineTo(x, y)绘制一条从当前位置到指定x以及y位置的直线。</span><br><span class="line">画圆形或圆弧</span><br><span class="line">arc(x, y, radius, startAngle, endAngle, anticlockwise)画一个以（x,y）为圆心的以radius为半径的圆弧（圆），从startAngle开始到endAngle结束，按照anticlockwise给定的方向（默认为顺时针）来生成。</span><br><span class="line">这里详细介绍一下arc方法，该方法有六个参数：x,y为绘制圆弧所在圆上的圆心坐标。radius为半径。startAngle以及endAngle参数用弧度定义了开始以及结束的弧度。这些都是以x轴为基准。参数anticlockwise为一个布尔值。为true时，是逆时针方向，否则顺时针方向。</span><br><span class="line">注意：arc()函数中表示角的单位是弧度，不是角度。角度与弧度的js表达式: 弧度=(Math.PI/180)*角度。</span><br></pre></td></tr></table></figure></p>
<p>ctx.beginPath();<br> var radius = 20; // 圆弧半径<br> var startAngle = 0; // 开始点<br> var endAngle = Math.PI*2; // 结束点<br> var anticlockwise = false；<br> var x = 25；<br> var y = 25；<br> ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise);<br> ctx.fill(); //或者使用ctx.stroke() 描边<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">实现思路</span><br><span class="line">监听三个鼠标事件，分别是onmousedown，onmousemove，onmouseup。当用户按下鼠标，通过canvas的API画下一个点</span><br></pre></td></tr></table></figure></p>
<p>canvas.onmousedown = function(event){<br>    var x = event.clientX<br>    var y = event.clientY   //获取用户按下鼠标是的坐标<br>    ctx.beginPath();<br>    ctx.arc(x,y,3,0,Math.PI*2);   //画一个半径为3像素的圆<br>    ctx.fill();<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">监听mousemove事件，但是不画圆，画线。划线需要两个点，当用户按下鼠标的是起点，第二个点是当前瞬间mousemove的点。所以需要一个变量记录last point</span><br></pre></td></tr></table></figure></p>
<p>var lastPoint = {x: 0,y:0}<br>canvas.onmousedown = function(event){<br>    var x = event.clientX<br>    var y = event.clientY   //获取用户按下鼠标是的坐标<br>    lastPoint = {x:x,y:y}<br>    ctx.beginPath();<br>    ctx.arc(x,y,3,0,Math.PI*2);   //画一个半径为3像素的圆<br>    ctx.fill();<br>}<br>canvas.onmousedown = function(event){<br>    var x = event.clientX<br>    var y = event.clientY<br>    var newPoint = {x: x,y: y}<br>    ctx.beginPath();<br>    ctx.lineWidth = 6;  //线的宽度<br>    ctx.moveTo(lastPoint.x,lastPoint.y);<br>    ctx.lineTo(newPoint.x,newPoint.y);<br>    ctx.closePath();<br>    ctx.stroke();<br>    lastPoint = newPoint //importent<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">实际上还需要一个变量来记录当前的状态，来记录用户是否按下鼠标或者松开鼠标，否则mousemove一直在触发，一直在画线。</span><br></pre></td></tr></table></figure></p>
<p>var canvas = document.getElementById(‘canvas’);<br>var eraser = document.getElementById(‘eraser’);<br>var ctx = canvas.getContext(‘2d’);<br>getSize();<br>window.onresize = function() {<br>    getSize();<br>}<br>function getSize () {<br>    var pageWidth = document.documentElement.clientWidth<br>    var pageHeight = document.documentElement.clientHeight<br>    canvas.width = pageWidth<br>    canvas.height = pageHeight<br>}<br>实现一个简易画板<br>功能包括此下载，删除，橡皮擦，不同颜色的画笔。<br>下载功能代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">download.onclick = function () &#123;</span><br><span class="line">	var image = canvas.toDataURL(&quot;image/png&quot;).replace(&quot;image/png&quot;, &quot;image/octet-stream&quot;)</span><br><span class="line">	window.location.href=image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>特性检测<br>画板为了实现在PC端移动端兼容，监听的事件是不一样的，所以需要判断一下当前用户的设备是否支持触摸。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.body.ontouchstart !== undefined</span><br></pre></td></tr></table></figure></p>
<p>当ontouchstart事件为undefined是表明当前设备不支持触摸，我们监听的是mouse事件。<br>另外为了兼容移动端的设备，css加上meta vp ，保证页面不会被缩放。<br>当用户设备支持touch事件，监听的是ontouchstart，ontouchmove，ontouchend事件，这几个事件也鼠标事件稍微有一些不一样。<br>当触发鼠标事件的时候，我们通过clientX和clientY获取到坐标信息，touch事件获取用户坐标是touches[0].clientX和touches[0].clientY。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/04/Canvas画板/" data-id="cjnx6jctc0000zkoru9y28b9f" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/08/18/对象/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          对象的继承
        
      </div>
    </a>
  
  
    <a href="/2018/05/31/配置webpack-3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">配置webpack 3</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/10/31/数组/">数组</a>
          </li>
        
          <li>
            <a href="/2018/10/31/Promise/">Promise</a>
          </li>
        
          <li>
            <a href="/2018/08/30/Cookie/">Cookie</a>
          </li>
        
          <li>
            <a href="/2018/08/18/对象/">对象的继承</a>
          </li>
        
          <li>
            <a href="/2018/06/04/Canvas画板/">Canvas画板</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 ZYF<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>